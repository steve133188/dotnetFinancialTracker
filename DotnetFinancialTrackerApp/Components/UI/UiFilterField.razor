@using System.Collections.Generic
@using MudBlazor

<MudStack @attributes="AdditionalAttributes"
          Class="@BuildContainerClass()"
          Spacing="@Spacing"
          Justify="@Justify"
          AlignItems="@AlignItems">
    @if (!string.IsNullOrWhiteSpace(Label))
    {
        <MudText Typo="@LabelTypo" Class="@BuildLabelClass()">@Label</MudText>
    }

    @ChildContent

    @if (HelperContent is not null)
    {
        <div class="@BuildHelperClass()">
            @HelperContent
        </div>
    }
    else if (!string.IsNullOrWhiteSpace(HelperText))
    {
        <MudText Typo="@HelperTypo" Class="@BuildHelperClass()">@HelperText</MudText>
    }
</MudStack>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? HelperContent { get; set; }
    [Parameter] public string Label { get; set; } = string.Empty;
    [Parameter] public string HelperText { get; set; } = string.Empty;
    [Parameter] public string Class { get; set; } = string.Empty;
    [Parameter] public string LabelClass { get; set; } = string.Empty;
    [Parameter] public string HelperClass { get; set; } = string.Empty;
    [Parameter] public int Spacing { get; set; } = 1;
    [Parameter] public Typo LabelTypo { get; set; } = Typo.caption;
    [Parameter] public Typo HelperTypo { get; set; } = Typo.caption;
    [Parameter] public Justify Justify { get; set; } = Justify.FlexStart;
    [Parameter] public AlignItems AlignItems { get; set; } = AlignItems.Stretch;
    [Parameter(CaptureUnmatchedValues = true)] public IDictionary<string, object>? AdditionalAttributes { get; set; }

    private string BuildContainerClass() => string.IsNullOrWhiteSpace(Class)
        ? "filter-field"
        : $"filter-field {Class}";

    private string BuildLabelClass() => string.IsNullOrWhiteSpace(LabelClass)
        ? "filter-field-label"
        : $"filter-field-label {LabelClass}";

    private string BuildHelperClass() => string.IsNullOrWhiteSpace(HelperClass)
        ? "filter-field-helper"
        : $"filter-field-helper {HelperClass}";
}
